(this["webpackJsonpfitbit-react"]=this["webpackJsonpfitbit-react"]||[]).push([[0],{189:function(e,t,a){e.exports=a(406)},194:function(e,t,a){},406:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(51),l=a.n(s),c=(a(194),a(52)),r=a(53),o=a(57),d=a(54),m=a(58),u=a(149),h=a(150),f=a.n(h),p=function(e){var t=e.badges;return i.a.createElement("div",{className:"panel panel-default"},i.a.createElement("div",{className:"panel-heading"},i.a.createElement("h4",null,"Badges")),i.a.createElement("div",{className:"panel-body"},t.badges.map((function(e,t){return i.a.createElement("div",{key:t},i.a.createElement("h5",null,e.shortName),i.a.createElement("p",null,i.a.createElement("img",{src:e.image100px,alt:""})),i.a.createElement("p",null,e.description),i.a.createElement("p",null,"Earned ",e.timesAchieved," times"),i.a.createElement("p",null,"Last on ",e.dateTime))}))))},v={user:{user:""},loggedIn:!1,lifetimeStats:{best:{total:{distance:{date:"",value:""},steps:{date:"",value:""}}},lifetime:{total:{distance:"",steps:""}}},badges:{badges:[]},steps:{"activities-steps":[]},distance:{"activities-distance":[]},friends:{friends:[]}},g=function(e){var t=e.friends;return i.a.createElement("div",{className:"panel panel-default"},i.a.createElement("div",{className:"panel-heading"},i.a.createElement("h4",null,"Friends")),i.a.createElement("div",{className:"panel-body"},0===t.length&&i.a.createElement("p",null,"you have no friends :("),t.map((function(e,t){return i.a.createElement("div",{key:t,className:"list-group-item"},i.a.createElement("span",{className:"badge"},e.average.steps),i.a.createElement("img",{src:e.user.avatar,style:{height:50,left:10,borderRadius:"50%"},alt:""}),i.a.createElement("h4",null,e.user.displayName))}))))},E=function(e){var t=e.lifetimeStats;return i.a.createElement("div",{className:"panel panel-default"},i.a.createElement("div",{className:"panel-heading"},i.a.createElement("h4",null,"Lifetime Stats")),i.a.createElement("div",{className:"panel-body"},i.a.createElement("h4",null,"Distance"),i.a.createElement("p",null,"Total: ",t.lifetime.total.distance),i.a.createElement("p",null,"Best: ",t.best.total.distance.value," on ",t.best.total.distance.date),i.a.createElement("h4",null,"Steps"),i.a.createElement("p",null,"Total: ",t.lifetime.total.steps),i.a.createElement("p",null,"Best: ",t.best.total.steps.value," on ",t.best.total.steps.date)))},b=a(23),w=function(e){var t=e.data,a=e.title,n=e.yMax;return i.a.createElement("div",{className:"panel panel-default"},i.a.createElement("div",{className:"panel-heading"},a),i.a.createElement("div",{className:"panel-body"},i.a.createElement(b.b,{width:500,height:300,data:t,margin:{top:5,right:30,left:20,bottom:5}},i.a.createElement(b.e,{dataKey:"dateTime"}),i.a.createElement(b.f,{domain:[0,n]}),i.a.createElement(b.c,{strokeDasharray:"3 3"}),i.a.createElement(b.d,null),i.a.createElement(b.a,{dataKey:"value",fill:"#8884d8"}))))},y=a(10),N=a(160),j=a.n(N),k={response_type:"token",client_id:"22BBTX",redirect_url:"http://localhost:3000/",scope:Object.entries({activity:!0,heartrate:!0,location:!0,nutrition:!0,profile:!0,settings:!0,sleep:!0,social:!0,weight:!0}).reduce((function(e,t){var a=Object(y.a)(t,2),n=a[0];return a[1]&&e.push(n),e}),[]).join("%20"),expires_in:31536e3},D="https://www.fitbit.com/oauth2/authorize?".concat(j.a.stringify(k)),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).state=v,a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"fetchFitbitData",value:function(e,t,a){var n=this;f()({method:"get",url:"https://api.fitbit.com/1.2/user/-/"+e,headers:{Authorization:"Bearer "+t},mode:"cors"}).then((function(t){console.log(e,t.data),n.setState(Object(u.a)({},a||e,t.data))})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){if(window.location.hash){var e=new URLSearchParams(window.location.hash).get("#access_token");this.setState({loggedIn:!0}),this.fetchFitbitData("profile.json",e,"user"),this.fetchFitbitData("activities.json",e,"lifetimeStats"),this.fetchFitbitData("badges.json",e,"badges"),this.fetchFitbitData("activities/steps/date/today/1m.json",e,"steps"),this.fetchFitbitData("activities/distance/date/today/1m.json",e,"distance"),this.fetchFitbitData("friends.json",e),this.fetchFitbitData("/sleep/date/2019-12-31.json",e),this.fetchFitbitData("/sleep/goal.json",e),this.fetchFitbitData("/sleep/date/2019-11-01/2019-12-01.json",e),this.fetchFitbitData("/activities/date/2019-11-17.json",e),this.fetchFitbitData("devices.json",e)}}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement("header",{className:"text-center"},i.a.createElement("span",{className:"pull-right"},this.state.user.user.displayName),i.a.createElement("h1",{className:"page-header"},"React Fit"),i.a.createElement("p",{className:"lead"},"Your personal fitness dashboard")),!this.state.loggedIn&&i.a.createElement("div",{className:"row text-center"},i.a.createElement("a",{href:D},"Log in with fitbit")),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-3"},i.a.createElement(E,{lifetimeStats:this.state.lifetimeStats}),i.a.createElement(p,{badges:this.state.badges})),i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(w,{data:this.state.steps["activities-steps"],title:"Steps",yMax:1e3}),i.a.createElement(w,{data:this.state.distance["activities-distance"],title:"Distance (kilometers)",yMax:2})),i.a.createElement("div",{className:"col-lg-2 col-lg-offset-1"},i.a.createElement(g,{friends:this.state.friends.friends}))),i.a.createElement("pre",null,JSON.stringify(this.state,void 0,2)))}}]),t}(n.Component),F=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(O,null)}}]),t}(n.Component),S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(i.a.createElement(F,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/fitbit-react",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/fitbit-react","/service-worker.js");S?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):x(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):x(e)}))}}()}},[[189,1,2]]]);
//# sourceMappingURL=main.c320c38d.chunk.js.map